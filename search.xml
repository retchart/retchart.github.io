<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>一个使用NJOY解析ENDF中子截面数据示例</title>
      <link href="/2020/03/29/An%20NJOY%20example%20to%20read%20ENDF%20cross%20section/"/>
      <url>/2020/03/29/An%20NJOY%20example%20to%20read%20ENDF%20cross%20section/</url>
      
        <content type="html"><![CDATA[<p>&emsp;&emsp;中子核截面数据是中子探测器的研究的出发点。然而ENDF截面数据格式里中子的截面数据在热区用1/v定律给出，在共振区以共振的公式给出，难以直观获取感兴趣核素的截面数据。而LAL的NJOY程序可以处理ENDF格式的截面数据，并解析出直观的截面数据。这里给出一个解析<sup>155</sup>Gd的中子截面数据的NJOY输入文件，说明改文件的每个输入卡的意义，并给出了NJOY的使用方法。</p><a id="more"></a>  <h2 id="1-NJOY的input文件说明"><a href="#1-NJOY的input文件说明" class="headerlink" title="1. NJOY的input文件说明"></a>1. NJOY的input文件说明</h2><p>&emsp;&emsp; 本例程分别使用NJOY程序包中的三个小程序：RECONR、BROADER和GROUPR，分别实现了共振区截面的重建、热运动造成的多普勒展宽分析和总的分群截面的重建。下文对每个卡的输入文件进行分别说明并给出响应的示例。</p><h3 id="1-1-共振区截面重建"><a href="#1-1-共振区截面重建" class="headerlink" title="1.1 共振区截面重建"></a>1.1 共振区截面重建</h3><p>&emsp;&emsp; RECONR程序的工作：  </p><ul><li>共振区截面重建<ul><li>在共振区定义初始能量间隔点</li></ul></li><li>线性化<ul><li>增加能量点以实现linear-linear插值复现满足用户指定的误差范围的原始截面插值</li></ul></li><li>组织化<ul><li>使导出的能量网格适合所有组成截面</li><li>所有的NJOY版本都会重新计算总截面（MT1）</li><li>NJOY2012以上版本重新计算了导出截面</li></ul></li></ul><p>&emsp;&emsp; RECONR输入卡说明:  </p><hr><ul><li><p>card 1</p><ul><li>nendf - endf 数据文件单元</li><li>npend - 处理后的 endf 数据文件单元</li></ul></li><li><p>card 2</p><ul><li>tlabel - 最大66字符的处理收的数据文件说明标签</li></ul></li><li><p>card 3</p><ul><li>mat - 需要重建的材料</li><li>ncards - 新的MF1的描述性数据卡的数目（default=0）</li><li>ngrid - 需要增加的用户能量网格点的数目（default=0）</li></ul></li><li><p>card 4 </p><ul><li>err - 重建共振积分的容许误差</li><li>tempr - 重建温度（deg kelvin)(default=0)</li><li>errmax </li><li>errint</li></ul></li><li><p>card 5</p><ul><li>cards - MT451的描述性注释的卡的数目</li></ul></li><li><p>card 6</p><ul><li>enode - 用户能量网格点  </li></ul></li><li><p>注意：cards 3, 4, 5, 6对于每种需要处理的材料都是必须的；”mat=0/“终止该程序。</p></li></ul><hr><p>&emsp;&emsp; RECONR输入文件示例：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">reconr  </span><br><span class="line"> 20 21&#x2F;</span><br><span class="line"> &#39;NJOY processed Gd-155 6434&#39;&#x2F;</span><br><span class="line"> 6434 1&#x2F;</span><br><span class="line"> .005&#x2F;</span><br><span class="line"> &#39;Gd-155 6434 &#39;&#x2F;</span><br><span class="line"> 0&#x2F;</span><br></pre></td></tr></table></figure><h3 id="1-2-多普勒展宽"><a href="#1-2-多普勒展宽" class="headerlink" title="1.2 多普勒展宽"></a>1.2 多普勒展宽</h3><p>&emsp;&emsp; BROADER程序的工作：  </p><ul><li>用户输入的初始温度和最终温度</li><li>可以定义多个最终温度</li><li>NJOY2012以上版本重新计算了导出截面</li><li>当请求T=293.6K时符合标准热数据</li><li>能量网格容许误差可以与RECONR所使用的不同</li><li>一些多普勒展宽的截面的特征<ul><li>1/v截面是不变的</li><li>多普勒展宽后能量网格点会有所减少</li></ul></li></ul><p>&emsp;&emsp; BROADER输入卡说明:  </p><hr><ul><li>card 1<ul><li>nendf - endf 数据文件单元</li><li>nin - 输入的pendf数据文件单元</li><li>nout - 输出的pendf数据文件单元</li></ul></li><li>card 2<ul><li>mat1 - 需要展宽的材料</li><li>ntemp2 - 最终温度的数量（default=1）</li><li>istart - 重新开始（0 no, 1 yes, default 0）</li><li>istrap - 引导程序（0 no, 1 yes, default 0）</li><li>temp1 - 输入的pendf数据文件单元的起始温度（default=0K）</li></ul></li><li>card 3<ul><li>errthn - 展宽的容许误差</li><li>thnmax - 展宽的最大能量</li><li>errmax - 积分标准满足时的最大容许误差</li><li>errint - 控制展宽积分的参数（default=errthn/20000）</li></ul></li><li>card 4 <ul><li>temp2 - 最终温度（deg Kelvin）</li></ul></li><li>card 5<ul><li>mat1 - 需要用这些参数处理的下一个MAT数。以mat1=0终止。  </li></ul></li></ul><hr><p>&emsp;&emsp; BROADER输入文件示例：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">broadr</span><br><span class="line"> 20 21 22&#x2F;</span><br><span class="line"> 6434 1&#x2F;</span><br><span class="line"> .005&#x2F;</span><br><span class="line"> 296.&#x2F;</span><br><span class="line"> 0&#x2F;</span><br></pre></td></tr></table></figure><h3 id="1-3-分群截面重建"><a href="#1-3-分群截面重建" class="headerlink" title="1.3 分群截面重建"></a>1.3 分群截面重建</h3><p>&emsp;&emsp; GROUPR程序的工作：  </p><ul><li>计算group-to-group散射矩阵</li><li>计算中子引起的各向异性的光子产生矩阵</li></ul><p>&emsp;&emsp; BROADER输入卡说明:  </p><hr><ul><li>card 1<ul><li>nendf - endf数据文件单元</li><li>npend - pendf数据文件单元</li><li>ngout1 - 输入的分群数据文件单元（default = 0）</li><li>ngout2 - 输出的分群数据文件单元（default = 0）</li></ul></li><li>card 2<ul><li>matb - 需要处理的材料</li><li>ign - 中子群结构选项</li><li>igg - γ群结构选项</li><li>iwt - 权重函数选项</li><li>lord - 勒让德级数</li><li>ntemp - 温度的数量（default=1）</li><li>nsigz - σ0的数量（default=1）</li><li>iprint - 打印长度选项（0/1=最小/最大）（default=1）</li><li>ismooth - 平滑处理的开/关（1/0=开/关）（default=1）</li></ul></li><li>card 3<ul><li>title - 运行标签（最大80字符）</li></ul></li><li>card 4 <ul><li>temp - 温度（kelvin）</li></ul></li><li>card 5<ul><li>sigz σ0值（包括无穷大）</li></ul></li><li>card 6a (如果ign=1)<ul><li>ngn - 群数量</li></ul></li><li>card 6b (如果ign=1)<ul><li>egn - ngn+1 群的能量</li></ul></li><li>card 7a （如果igg=1）<ul><li>ngg - 群数量</li><li>egn - ngn+1 群的能量</li></ul></li><li>card 8a 通量计算参数（仅适用于iwt.lt.0）<ul><li>fehi - 在计算的通量和bondarenko通量之间的切断</li><li>sigpot - 势散射截面的估计</li><li>nflmax - 计算的通量点的最大数量</li><li>ninwt - 新的通量参数的数据文件单元（default=0）</li><li>jsigz - 参考σ0在sigz数组中的索引</li><li>alpha2 - admixed moderator的α值（default=0,none）</li><li>sam - 每个吸收原子的admixed moderator 截面（default=0,none）</li><li>beta- 异质性参数（default=0, none）</li><li>alpha3 - 外部moderator的α值（default=0, none）</li><li>gamma - 外部moderator截面的admixed moderator截面分数（default=0）</li></ul></li><li>card 8b 表格（仅适用于iwt=1或者iwt=-1）<ul><li>wght - 读取权重函数作为tab1记录，可以用多行来描述，每一行以”/“结束</li></ul></li><li>card 8c 解析的通量参数（仅适用于iwt=4或iwt=-4）<ul><li>eb - 热切断（eV）</li><li>tb - 热温度（eV）</li><li>ec - 裂变切断（eV）</li><li>tc - 裂变温度</li></ul></li><li>card 8d 输入的共振通量（仅适用于iwt=0）<ul><li>ninwt - 通量参数的数据文件单元（binary）</li></ul></li><li>card 9<ul><li>mfd - 待处理的文件</li><li>mtd - 待处理的部分</li><li>mtname - 待处理部分的描述。对全部所需反应重复写。mfd=0/ 终止。</li></ul></li><li>card 10<ul><li>matd 洗一个待处理的材料号。matd=0/会终止groupr运行。</li></ul></li><li>输入参数的选项：<ul><li>ign：<ul><li>1 - 任意结构（读入）</li><li>2 - csewg 239群结构</li><li>3 - lanl 30群结构</li><li>4 - anl 27群结构</li><li>5 - rrd 50群结构</li><li>6 - gam-i 68群结构</li><li>7 - gam-ii 100群结构</li><li>8 - laser-thermos 35群结构</li><li>9 - epri-cpm 69群结构</li><li>10 - lanl 187群结构</li><li>11 - lanl 70群结构</li><li>12 - san-ii 620群结构</li><li>13 - lanl 80群结构</li><li>14 - eurlib 100群结构</li><li>15 - sand-iia 640群结构</li><li>16 - vitamin-e 174群结构</li><li>17 - vitamin-j 175群结构</li><li>18 - xmas nea-lanl</li><li>19 - eco 33群结构</li><li>20 - ecco 1968群结构</li><li>21 - tripoli 315群结构</li><li>22 - xmas lwpc 172群结构</li><li>23 - vit-j lwpc 175群结构</li></ul></li><li>igg：<ul><li>0 - none</li><li>1 - 任意结构（读入）</li><li>2 - csewg 94群结构</li><li>3 - lanl 12群结构</li><li>4 - steiner 21群结构</li><li>5 - straker 22群结构</li><li>6 - lanl 48群结构</li><li>7 - lanl 24群结构</li><li>8 - vitamin-c 36群结构</li><li>9 - vitamin-e 38群结构</li><li>10 - vitamin-j 42群结构</li></ul></li><li>iwt：<ul><li>1 - 读入平滑的权重函数</li><li>2 - 常量</li><li>3 - 1/e</li><li>4 - 1/e + fission spectrum + thermal maxwellian</li><li>5 - epri-cell lwr</li><li>6 - (thermal) – (1/e) – (fission + fusion)</li><li>7 - 与t-dep的热部分相同</li><li>8 - thermal–1/e–fast reactor-fission + fusion</li><li>9 - claw 权重函数</li><li>10 - claw 并包含t-dep热部分</li><li>11 - vitamin-e 权重函数（ornl-5505）</li><li>12 - vit-e 并包含t-dep热部分</li><li>-n - 通过权重n计算通量</li><li>0 - 从ninwt读入共振通量</li></ul></li><li>mfd：<ul><li>3 - 截面或者产额</li><li>5 - short-cut方法产生的裂变χ</li><li>6 - 中子-中子矩阵（mf4/5）</li><li>8 - 中子-中子矩阵（mf6）</li><li>12 - 光子产生截面（mf12）</li><li>13 - 光子产生截面（mf13）</li><li>16 - n-γ矩阵（光子产额）</li><li>17 - n-γ矩阵（光子截面）</li><li>18 - n-γ矩阵（mf6）</li><li>21 - 质子产生矩阵（mf6）</li><li>22 - 氘核产生（mf6）</li><li>23 - 氚核产生（mf6）</li><li>24 - HE-3产生（mf6）</li><li>25 - α产生（mf6）</li><li>26 - 残余核（A&gt;4）产生（mf6）</li><li>31 - 质子产生矩阵（mf4）</li><li>32 - 氘核产生（mf4）</li><li>33 - 氚核产生（mf4）</li><li>34 - HE-3产生（mf4）</li><li>35 - α产生（mf4）</li><li>36 - 残余核（A&gt;4）产生（mf4）</li></ul></li><li>mtd：<ul><li>-n - 处理所有的mt数</li><li>221-250 - 热散射保留</li><li>257 - 平均能量</li><li>258 - 平均对数能量</li><li>259 - 平均反向速度（m/sec）</li></ul></li><li>自动的反应处理选项：<ul><li>3/ - 处理pendf输入文件中的所有反应</li><li>6/ - 处理endf库中的所有的矩阵反应</li><li>10/ - 使用mf8处理所有核素产生</li><li>13/ - 处理所有的光子产生截面</li><li>16/ - 处理所有的光子产生矩阵</li><li>21/ - 处理所有的质子产生矩阵</li><li>22/ - 处理所有的氘核产生矩阵</li><li>23/ - 处理所有的氚核产生矩阵</li><li>24/ - 处理所有的HE-3产生矩阵</li><li>25/ - 处理所有的α产生矩阵</li><li>26/ - 处理所有的A&gt;4的产生矩阵</li></ul></li></ul></li></ul><hr><p>&emsp;&emsp; GROUPR输入文件示例：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">groupr</span><br><span class="line"> 20 22 0 23&#x2F;</span><br><span class="line"> 6434 2 3 4 3 1 1 1&#x2F;</span><br><span class="line"> &#39;NJOY processed Gd-155 6434&#39;&#x2F;</span><br><span class="line"> 296</span><br><span class="line"> 1.e10&#x2F;</span><br><span class="line"> .1 0.025 0.8208e06 1.4e06</span><br><span class="line"> 0&#x2F;</span><br><span class="line"> 0&#x2F;</span><br><span class="line">stop</span><br></pre></td></tr></table></figure><h2 id="2-程序使用"><a href="#2-程序使用" class="headerlink" title="2. 程序使用"></a>2. 程序使用</h2><p>&emsp;&emsp;安装NJOY的Github主页下载最新的NJOY21程序包，并按照其说明安装。然后去IAEA或者NIST的网站下载感兴趣的截面数据库，并解压。在解压后的工作目录中简历”input”文件，内容为上述三段示例程序。最后打开终端，转到工作目录下，运行以下命令（这里以GD-155为例）：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ cp n-064_Gd_155.endf tape20</span><br><span class="line">$ njoy21 &lt; input</span><br></pre></td></tr></table></figure><p>&emsp;&emsp;运行结束后会产生”tape21”、”tape22”和”tape23”三个文件，分别对应共振重建后的截面数据、多普勒展宽后的截面数据和分群能量网格数据。用户所需要的处理过后的截面数据可以对”tape22”中的数据进行直接解析。</p><h2 id="3-ENDF-格式简要说明"><a href="#3-ENDF-格式简要说明" class="headerlink" title="3. ENDF 格式简要说明"></a>3. ENDF 格式简要说明</h2><p>&emsp;&emsp;首先来一段刚才产生的”tape20”文件中的内容：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">                                                                 6434 2  0  128</span><br><span class="line">                                                                 6434 0  0  129</span><br><span class="line">6.415500+4 1.535920+2          0         99          0          06434 3  1  130</span><br><span class="line">0.000000+0 0.000000+0          0          0          1       58856434 3  1  131</span><br><span class="line">      5885          2                                            6434 3  1  132</span><br><span class="line">1.000000-5 2.474194+6 1.065000-5 2.397524+6 1.130000-5 2.327570+66434 3  1  133</span><br><span class="line">1.195000-5 2.263404+6 1.260000-5 2.204270+6 1.340000-5 2.137483+66434 3  1  134</span><br><span class="line">1.420000-5 2.076424+6 1.500000-5 2.020317+6 1.580000-5 1.968528+66434 3  1  135</span><br></pre></td></tr></table></figure><p>&emsp;&emsp;从该文件可以看出典型的ENDF格式：</p><ul><li>ENDF格式内容以一行为单位的card的形式展现。</li><li>每个card 80个字符，其中前66个字符为数据，后14个字符为控制参数。</li><li>控制参数为4个整数：<ul><li>matn(i4, 4位整型数据)=材料id。</li><li>mf(i2)=”file” id（详见ENDF手册，表4），每个”file” 为一个唯一的数据类型。</li><li>mt(i3)=”section” id(详见ENDF手册，附录B)，每个”section” 包含一个唯一的反应类型。</li><li>ns(i5)=sequence id(目前是废弃的，如果没有的话，NJOY也没有问题)。</li></ul></li><li>每个ENDF截面文件包含一些”file”，每个”file”包含的数据信息为：<ul><li>MF=1： 注释，目录，裂变数据；</li><li>MF=2： 共振参数；</li><li>MF=3： 截面；</li><li>MF=4： 出射中子角分布；</li><li>MF=5： 出射中子能量分布；</li><li>MF=6： 所有出射粒子的耦合的能量-角分布；</li><li>MF=7： 热散射定律数据；</li><li>MF=12-15：光子数据；</li><li>MF=30+：方差数据。</li></ul></li><li>每个”file”包含一个或多个”sections”:<ul><li>MF=1<ul><li>MT=451: 评价者的注释和“词典”</li><li>MT=452：总的​$\overline{v(E)}$；</li><li>MT=455,456,458,460:其它裂变数据；</li></ul></li><li>MF=2<ul><li>MT=151:求解的和未求解的共振参数；</li></ul></li><li>MF=3<ul><li>MT=1,2,…：MT=1为总截面，MT=2为弹性散射，MT=16为(n,2n)，MT=18为(n,f)，MT=51-90为非弹性散射，MT=102为(n,γ)……</li></ul></li><li>特定MT下的数据可能依赖于其它MT；</li><li>特定的(MF,MT)对可能是强制性的，这一来于文件中前面内容所说明的MT “section”;</li></ul></li><li>数据部分可能是文本、整数或者实数的组合。<ul><li>整数和实数的长度限定为11列；</li><li>数据结构包含：<ul><li>“CONT”记录 - 一个单一的卡。</li><li>“LIST”记录 - 一个或多个卡定义的简单的列表。</li><li>“TAB1”记录 - 多个卡定义的(xi, yi)数据及相关的插值代码。</li><li>“TAB2”记录 - 由多个”LIST”或”TAB1”记录组成的封装。</li></ul></li></ul></li><li>某些截面数据是”派生”的：<ul><li>“派生”的意思是可以从这个文件中的其它数据得到。<ul><li>比如MT=1(总截面)=所有其它截面的相加。</li><li>ENDF的插值规则意味着一个”派生”的总截面只能在联合能量点出有意义。</li><li>常用的”派生”的MT在ENDF格式手册的表14中给出。</li></ul></li><li>“派生”是一些感兴趣的数据类型，如“气体产生”，“热产生”或者“辐射损伤”。<ul><li>这些数据是数据处理程序产生的，而不是原始的ENDF评价数据。</li></ul></li></ul></li></ul>]]></content>
      
      
      <categories>
          
          <category> 软件技巧 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> NJOY </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hello bluebubu</title>
      <link href="/2020/03/06/hello_bluebubu/"/>
      <url>/2020/03/06/hello_bluebubu/</url>
      
        <content type="html"><![CDATA[<p>This is abstract. Test with hexo theme “bluebubu”.</p><a id="more"></a>  <p>This is content. It seems intresting!</p>]]></content>
      
      
      <categories>
          
          <category> 杂记 </category>
          
          <category> Test </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Test </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="/2020/03/05/hello-world/"/>
      <url>/2020/03/05/hello-world/</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p><a id="more"></a>  <h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html" target="_blank" rel="noopener">Deployment</a></p>]]></content>
      
      
      <categories>
          
          <category> 杂记 </category>
          
      </categories>
      
      
    </entry>
    
    
  
  
</search>
