{"meta":{"title":"Hexo","subtitle":"","description":"","author":"John Doe","url":"http://yoursite.com","root":"/"},"pages":[{"title":"关于","date":"2016-01-31T14:10:28.000Z","updated":"2020-03-07T02:21:13.000Z","comments":true,"path":"about/index.html","permalink":"http://yoursite.com/about/index.html","excerpt":"","text":""}],"posts":[{"title":"一个使用NJOY解析ENDF中子截面数据示例","slug":"An NJOY example to read ENDF cross section","date":"2020-03-29T07:30:30.000Z","updated":"2020-03-29T14:56:23.264Z","comments":true,"path":"2020/03/29/An NJOY example to read ENDF cross section/","link":"","permalink":"http://yoursite.com/2020/03/29/An%20NJOY%20example%20to%20read%20ENDF%20cross%20section/","excerpt":"&emsp;&emsp;中子核截面数据是中子探测器的研究的出发点。然而ENDF截面数据格式里中子的截面数据在热区用1/v定律给出，在共振区以共振的公式给出，难以直观获取感兴趣核素的截面数据。而LAL的NJOY程序可以处理ENDF格式的截面数据，并解析出直观的截面数据。这里给出一个解析155Gd的中子截面数据的NJOY输入文件，说明改文件的每个输入卡的意义，并给出了NJOY的使用方法。","text":"&emsp;&emsp;中子核截面数据是中子探测器的研究的出发点。然而ENDF截面数据格式里中子的截面数据在热区用1/v定律给出，在共振区以共振的公式给出，难以直观获取感兴趣核素的截面数据。而LAL的NJOY程序可以处理ENDF格式的截面数据，并解析出直观的截面数据。这里给出一个解析155Gd的中子截面数据的NJOY输入文件，说明改文件的每个输入卡的意义，并给出了NJOY的使用方法。 1. NJOY的input文件说明&emsp;&emsp; 本例程分别使用NJOY程序包中的三个小程序：RECONR、BROADER和GROUPR，分别实现了共振区截面的重建、热运动造成的多普勒展宽分析和总的分群截面的重建。下文对每个卡的输入文件进行分别说明并给出响应的示例。 1.1 共振区截面重建&emsp;&emsp; RECONR程序的工作： 共振区截面重建 在共振区定义初始能量间隔点 线性化 增加能量点以实现linear-linear插值复现满足用户指定的误差范围的原始截面插值 组织化 使导出的能量网格适合所有组成截面 所有的NJOY版本都会重新计算总截面（MT1） NJOY2012以上版本重新计算了导出截面 &emsp;&emsp; RECONR输入卡说明: card 1 nendf - endf 数据文件单元 npend - 处理后的 endf 数据文件单元 card 2 tlabel - 最大66字符的处理收的数据文件说明标签 card 3 mat - 需要重建的材料 ncards - 新的MF1的描述性数据卡的数目（default=0） ngrid - 需要增加的用户能量网格点的数目（default=0） card 4 err - 重建共振积分的容许误差 tempr - 重建温度（deg kelvin)(default=0) errmax errint card 5 cards - MT451的描述性注释的卡的数目 card 6 enode - 用户能量网格点 注意：cards 3, 4, 5, 6对于每种需要处理的材料都是必须的；”mat=0/“终止该程序。 &emsp;&emsp; RECONR输入文件示例： 1234567reconr 20 21&#x2F; &#39;NJOY processed Gd-155 6434&#39;&#x2F; 6434 1&#x2F; .005&#x2F; &#39;Gd-155 6434 &#39;&#x2F; 0&#x2F; 1.2 多普勒展宽&emsp;&emsp; BROADER程序的工作： 用户输入的初始温度和最终温度 可以定义多个最终温度 NJOY2012以上版本重新计算了导出截面 当请求T=293.6K时符合标准热数据 能量网格容许误差可以与RECONR所使用的不同 一些多普勒展宽的截面的特征 1/v截面是不变的 多普勒展宽后能量网格点会有所减少 &emsp;&emsp; BROADER输入卡说明: card 1 nendf - endf 数据文件单元 nin - 输入的pendf数据文件单元 nout - 输出的pendf数据文件单元 card 2 mat1 - 需要展宽的材料 ntemp2 - 最终温度的数量（default=1） istart - 重新开始（0 no, 1 yes, default 0） istrap - 引导程序（0 no, 1 yes, default 0） temp1 - 输入的pendf数据文件单元的起始温度（default=0K） card 3 errthn - 展宽的容许误差 thnmax - 展宽的最大能量 errmax - 积分标准满足时的最大容许误差 errint - 控制展宽积分的参数（default=errthn/20000） card 4 temp2 - 最终温度（deg Kelvin） card 5 mat1 - 需要用这些参数处理的下一个MAT数。以mat1=0终止。 &emsp;&emsp; BROADER输入文件示例： 123456broadr 20 21 22&#x2F; 6434 1&#x2F; .005&#x2F; 296.&#x2F; 0&#x2F; 1.3 分群截面重建&emsp;&emsp; GROUPR程序的工作： 计算group-to-group散射矩阵 计算中子引起的各向异性的光子产生矩阵 &emsp;&emsp; BROADER输入卡说明: card 1 nendf - endf数据文件单元 npend - pendf数据文件单元 ngout1 - 输入的分群数据文件单元（default = 0） ngout2 - 输出的分群数据文件单元（default = 0） card 2 matb - 需要处理的材料 ign - 中子群结构选项 igg - γ群结构选项 iwt - 权重函数选项 lord - 勒让德级数 ntemp - 温度的数量（default=1） nsigz - σ0的数量（default=1） iprint - 打印长度选项（0/1=最小/最大）（default=1） ismooth - 平滑处理的开/关（1/0=开/关）（default=1） card 3 title - 运行标签（最大80字符） card 4 temp - 温度（kelvin） card 5 sigz σ0值（包括无穷大） card 6a (如果ign=1) ngn - 群数量 card 6b (如果ign=1) egn - ngn+1 群的能量 card 7a （如果igg=1） ngg - 群数量 egn - ngn+1 群的能量 card 8a 通量计算参数（仅适用于iwt.lt.0） fehi - 在计算的通量和bondarenko通量之间的切断 sigpot - 势散射截面的估计 nflmax - 计算的通量点的最大数量 ninwt - 新的通量参数的数据文件单元（default=0） jsigz - 参考σ0在sigz数组中的索引 alpha2 - admixed moderator的α值（default=0,none） sam - 每个吸收原子的admixed moderator 截面（default=0,none） beta- 异质性参数（default=0, none） alpha3 - 外部moderator的α值（default=0, none） gamma - 外部moderator截面的admixed moderator截面分数（default=0） card 8b 表格（仅适用于iwt=1或者iwt=-1） wght - 读取权重函数作为tab1记录，可以用多行来描述，每一行以”/“结束 card 8c 解析的通量参数（仅适用于iwt=4或iwt=-4） eb - 热切断（eV） tb - 热温度（eV） ec - 裂变切断（eV） tc - 裂变温度 card 8d 输入的共振通量（仅适用于iwt=0） ninwt - 通量参数的数据文件单元（binary） card 9 mfd - 待处理的文件 mtd - 待处理的部分 mtname - 待处理部分的描述。对全部所需反应重复写。mfd=0/ 终止。 card 10 matd 洗一个待处理的材料号。matd=0/会终止groupr运行。 输入参数的选项： ign： 1 - 任意结构（读入） 2 - csewg 239群结构 3 - lanl 30群结构 4 - anl 27群结构 5 - rrd 50群结构 6 - gam-i 68群结构 7 - gam-ii 100群结构 8 - laser-thermos 35群结构 9 - epri-cpm 69群结构 10 - lanl 187群结构 11 - lanl 70群结构 12 - san-ii 620群结构 13 - lanl 80群结构 14 - eurlib 100群结构 15 - sand-iia 640群结构 16 - vitamin-e 174群结构 17 - vitamin-j 175群结构 18 - xmas nea-lanl 19 - eco 33群结构 20 - ecco 1968群结构 21 - tripoli 315群结构 22 - xmas lwpc 172群结构 23 - vit-j lwpc 175群结构 igg： 0 - none 1 - 任意结构（读入） 2 - csewg 94群结构 3 - lanl 12群结构 4 - steiner 21群结构 5 - straker 22群结构 6 - lanl 48群结构 7 - lanl 24群结构 8 - vitamin-c 36群结构 9 - vitamin-e 38群结构 10 - vitamin-j 42群结构 iwt： 1 - 读入平滑的权重函数 2 - 常量 3 - 1/e 4 - 1/e + fission spectrum + thermal maxwellian 5 - epri-cell lwr 6 - (thermal) – (1/e) – (fission + fusion) 7 - 与t-dep的热部分相同 8 - thermal–1/e–fast reactor-fission + fusion 9 - claw 权重函数 10 - claw 并包含t-dep热部分 11 - vitamin-e 权重函数（ornl-5505） 12 - vit-e 并包含t-dep热部分 -n - 通过权重n计算通量 0 - 从ninwt读入共振通量 mfd： 3 - 截面或者产额 5 - short-cut方法产生的裂变χ 6 - 中子-中子矩阵（mf4/5） 8 - 中子-中子矩阵（mf6） 12 - 光子产生截面（mf12） 13 - 光子产生截面（mf13） 16 - n-γ矩阵（光子产额） 17 - n-γ矩阵（光子截面） 18 - n-γ矩阵（mf6） 21 - 质子产生矩阵（mf6） 22 - 氘核产生（mf6） 23 - 氚核产生（mf6） 24 - HE-3产生（mf6） 25 - α产生（mf6） 26 - 残余核（A&gt;4）产生（mf6） 31 - 质子产生矩阵（mf4） 32 - 氘核产生（mf4） 33 - 氚核产生（mf4） 34 - HE-3产生（mf4） 35 - α产生（mf4） 36 - 残余核（A&gt;4）产生（mf4） mtd： -n - 处理所有的mt数 221-250 - 热散射保留 257 - 平均能量 258 - 平均对数能量 259 - 平均反向速度（m/sec） 自动的反应处理选项： 3/ - 处理pendf输入文件中的所有反应 6/ - 处理endf库中的所有的矩阵反应 10/ - 使用mf8处理所有核素产生 13/ - 处理所有的光子产生截面 16/ - 处理所有的光子产生矩阵 21/ - 处理所有的质子产生矩阵 22/ - 处理所有的氘核产生矩阵 23/ - 处理所有的氚核产生矩阵 24/ - 处理所有的HE-3产生矩阵 25/ - 处理所有的α产生矩阵 26/ - 处理所有的A&gt;4的产生矩阵 &emsp;&emsp; GROUPR输入文件示例： 12345678910groupr 20 22 0 23&#x2F; 6434 2 3 4 3 1 1 1&#x2F; &#39;NJOY processed Gd-155 6434&#39;&#x2F; 296 1.e10&#x2F; .1 0.025 0.8208e06 1.4e06 0&#x2F; 0&#x2F;stop 2. 程序使用&emsp;&emsp;安装NJOY的Github主页下载最新的NJOY21程序包，并按照其说明安装。然后去IAEA或者NIST的网站下载感兴趣的截面数据库，并解压。在解压后的工作目录中简历”input”文件，内容为上述三段示例程序。最后打开终端，转到工作目录下，运行以下命令（这里以GD-155为例）： 12$ cp n-064_Gd_155.endf tape20$ njoy21 &lt; input &emsp;&emsp;运行结束后会产生”tape21”、”tape22”和”tape23”三个文件，分别对应共振重建后的截面数据、多普勒展宽后的截面数据和分群能量网格数据。用户所需要的处理过后的截面数据可以对”tape22”中的数据进行直接解析。 3. ENDF 格式简要说明&emsp;&emsp;首先来一段刚才产生的”tape20”文件中的内容： 12345678 6434 2 0 128 6434 0 0 1296.415500+4 1.535920+2 0 99 0 06434 3 1 1300.000000+0 0.000000+0 0 0 1 58856434 3 1 131 5885 2 6434 3 1 1321.000000-5 2.474194+6 1.065000-5 2.397524+6 1.130000-5 2.327570+66434 3 1 1331.195000-5 2.263404+6 1.260000-5 2.204270+6 1.340000-5 2.137483+66434 3 1 1341.420000-5 2.076424+6 1.500000-5 2.020317+6 1.580000-5 1.968528+66434 3 1 135 &emsp;&emsp;从该文件可以看出典型的ENDF格式： ENDF格式内容以一行为单位的card的形式展现。 每个card 80个字符，其中前66个字符为数据，后14个字符为控制参数。 控制参数为4个整数： matn(i4, 4位整型数据)=材料id。 mf(i2)=”file” id（详见ENDF手册，表4），每个”file” 为一个唯一的数据类型。 mt(i3)=”section” id(详见ENDF手册，附录B)，每个”section” 包含一个唯一的反应类型。 ns(i5)=sequence id(目前是废弃的，如果没有的话，NJOY也没有问题)。 每个ENDF截面文件包含一些”file”，每个”file”包含的数据信息为： MF=1： 注释，目录，裂变数据； MF=2： 共振参数； MF=3： 截面； MF=4： 出射中子角分布； MF=5： 出射中子能量分布； MF=6： 所有出射粒子的耦合的能量-角分布； MF=7： 热散射定律数据； MF=12-15：光子数据； MF=30+：方差数据。 每个”file”包含一个或多个”sections”: MF=1 MT=451: 评价者的注释和“词典” MT=452：总的​$\\overline{v(E)}$； MT=455,456,458,460:其它裂变数据； MF=2 MT=151:求解的和未求解的共振参数； MF=3 MT=1,2,…：MT=1为总截面，MT=2为弹性散射，MT=16为(n,2n)，MT=18为(n,f)，MT=51-90为非弹性散射，MT=102为(n,γ)…… 特定MT下的数据可能依赖于其它MT； 特定的(MF,MT)对可能是强制性的，这一来于文件中前面内容所说明的MT “section”; 数据部分可能是文本、整数或者实数的组合。 整数和实数的长度限定为11列； 数据结构包含： “CONT”记录 - 一个单一的卡。 “LIST”记录 - 一个或多个卡定义的简单的列表。 “TAB1”记录 - 多个卡定义的(xi, yi)数据及相关的插值代码。 “TAB2”记录 - 由多个”LIST”或”TAB1”记录组成的封装。 某些截面数据是”派生”的： “派生”的意思是可以从这个文件中的其它数据得到。 比如MT=1(总截面)=所有其它截面的相加。 ENDF的插值规则意味着一个”派生”的总截面只能在联合能量点出有意义。 常用的”派生”的MT在ENDF格式手册的表14中给出。 “派生”是一些感兴趣的数据类型，如“气体产生”，“热产生”或者“辐射损伤”。 这些数据是数据处理程序产生的，而不是原始的ENDF评价数据。","categories":[{"name":"软件技巧","slug":"软件技巧","permalink":"http://yoursite.com/categories/%E8%BD%AF%E4%BB%B6%E6%8A%80%E5%B7%A7/"}],"tags":[{"name":"NJOY","slug":"NJOY","permalink":"http://yoursite.com/tags/NJOY/"}]},{"title":"Hello bluebubu","slug":"hello_bluebubu","date":"2020-03-06T06:40:44.000Z","updated":"2020-03-07T03:00:05.000Z","comments":true,"path":"2020/03/06/hello_bluebubu/","link":"","permalink":"http://yoursite.com/2020/03/06/hello_bluebubu/","excerpt":"This is abstract. Test with hexo theme “bluebubu”.","text":"This is abstract. Test with hexo theme “bluebubu”. This is content. It seems intresting!","categories":[{"name":"杂记","slug":"杂记","permalink":"http://yoursite.com/categories/%E6%9D%82%E8%AE%B0/"},{"name":"Test","slug":"杂记/Test","permalink":"http://yoursite.com/categories/%E6%9D%82%E8%AE%B0/Test/"}],"tags":[{"name":"Test","slug":"Test","permalink":"http://yoursite.com/tags/Test/"}]},{"title":"Hello World","slug":"hello-world","date":"2020-03-05T06:40:44.000Z","updated":"2020-03-06T14:59:01.000Z","comments":true,"path":"2020/03/05/hello-world/","link":"","permalink":"http://yoursite.com/2020/03/05/hello-world/","excerpt":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub.","text":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post1$ hexo new \"My New Post\" More info: Writing Run server1$ hexo server More info: Server Generate static files1$ hexo generate More info: Generating Deploy to remote sites1$ hexo deploy More info: Deployment","categories":[{"name":"杂记","slug":"杂记","permalink":"http://yoursite.com/categories/%E6%9D%82%E8%AE%B0/"}],"tags":[]}]}